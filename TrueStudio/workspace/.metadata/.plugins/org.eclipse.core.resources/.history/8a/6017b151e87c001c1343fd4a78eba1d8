#ifndef INC_ENC_RECALC_POS_H_
#define INC_ENC_RECALC_POS_H_

#include "my_types.h"
#include "line.h"
#include "arc.h"

BOOL enc_mode = FALSE;
BOOL enc_reg_valid = FALSE;
int32_t enc_x_reg = 0, enc_y_reg = 0;
int32_t pos_x_enc_reg = 0, pos_y_enc_reg = 0;

void cnc_setEncModeXY(BOOL ena) {
	if ( cnc_isIdle() ) {
		enc_mode = ena;
		clear_enc_reg();
	}
}
BOOL cnc_isEncMode() { return enc_mode; }

void clear_enc_reg() {
	enc_reg_valid = FALSE;
	enc_x_reg = enc_y_reg = 0;
	pos_x_enc_reg = pos_y_enc_reg = 0;
}

size_t enc_recalc_pos(point_t* const mtr_pt, const point_t* const mtr_uv_pt, const line_t* const line, const arc_t* const arc, const size_t cur_step_id);

#endif /* INC_ENC_RECALC_POS_H_ */
